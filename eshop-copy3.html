
<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="utf-8">
    <title>Personalizovaná Stránka Produktu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://use.typekit.net/ikz8qig.css">
    <link rel="stylesheet" href="https://data.kralovstvi-tiande.cz/web/build/app.be3b0ec2.css">
    <link rel="stylesheet" href="https://data.kralovstvi-tiande.cz/web/build/product.f51881d4.css">
    <style>
        /* Přidané CSS pro personalizovaný obsah */
        .personalized-content { margin-top: 20px; }
        .personalized-content h2 { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px; }
        .personalized-content p.description { margin-bottom: 10px; }
        .personalized-content ul.benefits, .personalized-content ul.reviews { list-style-type: none; padding: 0; }
        .personalized-content ul.benefits li, .personalized-content ul.reviews li { margin-bottom: 5px; }
        .personalized-content .review-item { margin-bottom: 15px; }
    </style>
</head>
<body>
    <header class="header">
        <!-- Zde by měl být obsah hlavičky eshopu -->
    </header>
    <main class="main main-product">
        <div class="container">
            <!-- Breadcrumbs -->
            <ul class="breadcrumbs">
                <li><a href="/" title="Zpět na úvod">Úvod</a></li>
                <li class="active">Personalizovaná Stránka Produktu</li>
            </ul>

            <!-- Product Main Section -->
            <div class="row product-main-info">
                <div class="col-xl-5 col-lg-6 col-md-12 product-gallery-wrapper">
                    <div class="product-gallery">
                        <!-- Nahoru Galerie obrázků, alespoň 1 obrázek -->
                        <div class="product-photo">
                            <a href="#" data-rel="gallery"> <!-- Uprav tuto URL odkazu na správnou cestu k obrázku -->
                                <img src="https://data.kralovstvi-tiande.cz/data/tmp/3/3/2403_3.jpg?1699515756_1" alt="Fytogel na nohy Slaviton" class="img-responsive">
                            </a>
                        </div>
                    </div>
                    <div class="btn-favorites">
                        <span class="fc icons_heart"></span><span class="text">Přidat mezi oblíbené</span>
                    </div>
                </div>
                <div class="col-xl-7 col-lg-6 col-md-12 product-info">
                    <h1 id="product-name">Fytogel na nohy Slaviton</h1>
                    <p class="code" id="product-code">Kód produktu: 44402-1</p>
                    <div class="review-stars-wrapper">
                        <div class="review-stars">
                            <i class="fc icons_star_full"></i>
                            <i class="fc icons_star_full"></i>
                            <i class="fc icons_star_full"></i>
                            <i class="fc icons_star_full"></i>
                            <i class="fc icons_star_full"></i>
                        </div>
                        <span class="rating">5</span>
                        <span class="reviews-count">53x hodnoceno</span>
                    </div>
                    <p class="perex" id="meta-description">
                        Slaviton TianDe je unikátní chladivý fytogel na nohy, který přináší okamžitou úlevu unaveným...
                    </p>
                    <div class="product-price-block">
                        <p class="price" id="product-price">399 Kč</p>
                        <p class="price-without-vat" id="product-price-without-vat">330 Kč&nbsp;bez DPH</p>
                    </div>
                    <div class="submit-block">
                        <input class="form-control" type="number" name="No" title="Počet kusů" value="1" step="1">
                        <button type="button" class="btn btn-insert">Vložit do košíku</button>
                    </div>
                    
                    <!-- Dropdown pro výběr věkové kategorie -->
                    <div class="form-group">
                        <label for="age-category">Vybrat věkovou kategorii:</label>
                        <select id="age-category" class="form-control">
                            <option value="12-17">12-17</option>
                            <option value="18-29">18-29</option>
                            <option value="30-45">30-45</option>
                            <option value="46-60">46-60</option>
                            <option value="61+">61+</option>
                        </select>
                    </div>

                    <!-- Personalizovaný obsah -->
                    <div id="personalized-content" class="personalized-content">
                        <h2 class="personalized-title"></h2>
                        <p class="description personalized-description"></p>
                        <ul class="benefits personalized-benefits"></ul>
                        <h3>Recenze našich zákazníků</h3>
                        <ul class="reviews personalized-reviews"></ul>
                    </div>
                </div>
            </div>

            <!-- Sekce s detaily produktu -->
            <div id="product-details">
                <h2>Detailní popis</h2>
                <p id="detailed-description"></p>
            </div>

            <!-- Složení a účinky -->
            <div id="ingredients-and-effects">
                <h2>Složení a účinky</h2>
                <ul id="ingredients-list"></ul>
            </div>
            
            <!-- Návod k použití -->
            <div id="instructions">
                <h2>Návod k použití</h2>
                <p id="usage-instructions"></p>
            </div>

            <!-- Často kladené otázky -->
            <div id="faq">
                <h2>Často kladené otázky</h2>
                <ul id="faq-list"></ul>
            </div>

            <!-- Doporučené produkty -->
            <div id="recommended-products">
                <h2>Doporučené produkty</h2>
                <ul id="recommended-list"></ul>
            </div>

            <!-- Recenze zákazníků -->
            <div id="reviews-section" class="reviews-section">
                <h2>Recenze</h2>
                <div id="reviews-list"></div>
            </div>
        </div>
    </main>
    <footer class="footer">
        <!-- Zde by měl být obsah patičky eshopu -->
    </footer>

    <script>
        // Načtení JSON dat z externího souboru
        fetch('produkt2.json')
            .then(response => response.json())
            .then(data => {
                // Funkce na vykreslení personalizovaného obsahu
                function renderPersonalizedContent(ageCategory) {
                    const content = data.personalizované_části.personalizovaný_obsah[ageCategory];
                    if (content) {
                        document.querySelector('.personalized-title').innerText = content.krátký_popis;
                        document.querySelector('.personalized-description').innerText = content.rychlý_přehled.join(", ");
                        const benefitsList = document.querySelector('.personalized-benefits');
                        benefitsList.innerHTML = "";
                        content.klíčové_benefity.forEach(benefit => {
                            const li = document.createElement('li');
                            li.innerText = benefit;
                            benefitsList.appendChild(li);
                        });

                        // Render recenzí
                        const reviewsList = document.querySelector('.personalized-reviews');
                        reviewsList.innerHTML = "";
                        content.recenze_zákazníků.forEach(review => {
                            const li = document.createElement('li');
                            li.innerHTML = `<strong>${review.jméno} (${review.věk} let)</strong>: ${'<i class="fc icons_star_full"></i>'.repeat(review.hodnocení)} <br> ${review.text}`;
                            reviewsList.appendChild(li);
                        });
                    }
                }

                // Inicializace obsahu na základě výchozí věkové kategorie
                document.getElementById('age-category').addEventListener('change', (event) => {
                    renderPersonalizedContent(event.target.value);
                });

                // Inicializace s výchozí hodnotou kategorie
                renderPersonalizedContent(document.getElementById('age-category').value);

                // Funkce na vykreslení společných částí obsahu
                function renderCommonContent() {
                    document.querySelector("#product-name").innerText = data.společné_části.základní_informace.název_produktu;
                    document.querySelector("#product-code").innerText = `Kód produktu: ${data.společné_části.základní_informace.kód_produktu}`;
                    document.querySelector("#meta-description").innerText = data.společné_části.základní_informace.meta_popis;
                    document.querySelector("#product-price").innerText = `${data.společné_části.základní_informace.cena.s_dph} Kč`;
                    document.querySelector("#product-price-without-vat").innerText = `${data.společné_části.základní_informace.cena.bez_dph} Kč bez DPH`;
                    document.querySelector("#detailed-description").innerText = data.společné_části.detailní_popis;
                    document.querySelector("#usage-instructions").innerText = data.společné_části.základní_informace.návod_k_použití;

                    // Složení a účinky
                    const ingredientsList = document.querySelector("#ingredients-list");
                    ingredientsList.innerHTML = "";
                    data.společné_části.základní_informace.složení_a_účinky.forEach(item => {
                        const li = document.createElement('li');
                        li.innerHTML = `<strong>${item.složka}:</strong> ${item.účinek}`;
                        ingredientsList.appendChild(li);
                    });

                    // Často kladené otázky
                    const faqList = document.querySelector("#faq-list");
                    faqList.innerHTML = "";
                    data.společné_části.často_kladené_otázky.forEach(faq => {
                        const li = document.createElement('li');
                        li.innerHTML = `<strong>${faq.otázka}</strong><br>${faq.odpověď}`;
                        faqList.appendChild(li);
                    });

                    // Doporučené produkty
                    const recommendedList = document.querySelector("#recommended-list");
                    recommendedList.innerHTML = "";
                    data.personalizované_části.personalizovaný_obsah[document.getElementById('age-category').value].doporučené_produkty.forEach(product => {
                        const li = document.createElement('li');
                        li.innerText = product;
                        recommendedList.appendChild(li);
                    });
                }

                // Zavolání funkce pro vykreslení stálého obsahu
                renderCommonContent();
            });
    </script>
</body>
</html>